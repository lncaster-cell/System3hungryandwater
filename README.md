# System3hungryandwater

Репозиторий с акцентом на **NWScript**-реализацию производительных механик:
- лагерь,
- перемещение партий между городами,
- встречи в пути,
- торговля.

## NWScript-модули
- `nwscript/camp_system.nss` — состояние лагеря и понижение активности.
- `src/world_system.py::CampSystem` — персональный лагерь (получение, склад вещей, спутники).
- `nwscript/travel_system.nss` — маршруты между городами по timestamp-модели.
- `src/world_system.py::TravelSystem.project_travel` — проекция "дни в пути / минуты ожидания / проверки встреч" с штрафом при отсутствии лагеря (ночёвка в таверне).
- `nwscript/encounter_system.nss` — детерминированные встречи в окнах времени.
- `src/world_system.py::EncounterSystem.events_for_checks` — фиксированное число проверок встреч на путешествие (например 10 проверок за 5 дней).
- `nwscript/trade_system.nss` — integer-only торговля с атомарной покупкой строки заказа.

## Принципы производительности
- Нет обязательного фонового per-tick обновления всей карты.
- Событийная модель: расчёт выполняется только по запросу/событию.
- Целочисленная арифметика для минимизации накладных расходов.
- Локальные переменные объектов для дешёвой сериализации состояния.

## Проверка
```bash
pytest -q
```
